<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Book</title>
  <link th:href="@{css/global.css}" href="../static/css/global.css"
        rel="stylesheet" type="text/css" media="screen"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    .error {
      color: red;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>Add Book</h1>
  <form th:action="@{/addBook}" th:object="${book}" method="post">
    <div class="form-group">
      <label for="title">Name:</label>
      <input type="text" class="form-control" id="title" th:field="*{title}" required>
      <p class="error" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></p>
    </div>

    <!-- Add ISBN input field -->
    <div class="form-group">
      <label for="isbn">ISBN number:</label>
      <input type="text" class="form-control" id="isbn" th:field="*{isbn}" pattern="\d{3}-\d{1,5}-\d{1,7}-\d{1,6}-\d{1}" required>
      <p class="error" th:if="${#fields.hasErrors('isbn')}" th:errors="*{isbn}"></p>
    </div>
    <!-- Add price input field -->
    <div class="form-group">
      <label for="price">Purchase price:</label>
      <input type="number" class="form-control" id="price" th:field="*{price}" min="0.01" max="99.99" step="0.01">
      <p class="error" th:if="${#fields.hasErrors('price')}" th:errors="*{price}"></p>
    </div>

    <div id="authors-container">
      <div class="form-group author-group">
        <label>Author:</label>
        <input type="text" class="form-control author-input" placeholder="Author name">
        <button type="button" class="btn btn-danger btn-sm mt-2 remove-author mb-2">Remove Author</button>
      </div>
    </div>
    <button type="button" id="add-author" class="btn btn-secondary">Add Author</button>

    <div id="locations-container">
      <!-- Starting location input field -->
      <div class="location-group">
        <div class="form-group">
          <label>Location - Plaatscode1:</label>
          <input type="number" class="form-control" min="50" max="300" placeholder="Plaatscode1">
        </div>
        <div class="form-group">
          <label>Location - Plaatscode2:</label>
          <input type="number" class="form-control" min="50" max="300" placeholder="Plaatscode2">
        </div>
        <div class="form-group">
          <label>Location - Plaatsnaam:</label>
          <input type="text" class="form-control" pattern="[a-zA-Z]+" placeholder="Plaatsnaam">
        </div>
        <button type="button" class="btn btn-danger btn-sm remove-location mb-2">Remove Location</button>
      </div>
    </div>
    <div style="display: flex; justify-content: space-between;">
      <button type="button" id="add-location" class="btn btn-secondary mb-2">Add Location</button>
      <div>
        <a href="/" class="btn btn-danger mb-2">Cancel</a>
        <button type="submit" class="btn btn-primary mb-2">Add Book</button>
      </div>
    </div>



  </form>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
  $(document).ready(function () {
    $('#add-author').on('click', function () {
      const authorInput = `<div class="form-group author-group">
        <label>Author:</label>
        <input type="text" class="form-control author-input" placeholder="Author name">
        <button type="button" class="btn btn-danger btn-sm mt-2 remove-author mb-2">Remove Author</button>
      </div>`;
      $('#authors-container').append(authorInput);
    });

    $('#add-location').on('click', function () {
      const locationInput = `<div class="location-group">
        <div class="form-group">
          <label>Location - Plaatscode1:</label>
          <input type="number" class="form-control" min="50" max="300" placeholder="Plaatscode1">
        </div>
        <div class="form-group">
          <label>Location - Plaatscode2:</label>
          <input type="number" class="form-control" min="50" max="300" placeholder="Plaatscode2">
        </div>
        <div class="form-group">
          <label>Location - Plaatsnaam:</label>
          <input type="text" class="form-control" pattern="[a-zA-Z]+" placeholder="Plaatsnaam">
        </div>
        <button type="button" class="btn btn-danger btn-sm remove-location mb-2">Remove Location</button>
      </div>`;
      $('#locations-container').append(locationInput);
    });

    // Remove author event
    $(document).on('click', '.remove-author', function () {
      $(this).closest('.author-group').remove();
    });

    // Remove location event
    $(document).on('click', '.remove-location', function () {
      $(this).closest('.location-group').remove();
    });
  });
</script>

</body>
</html>
